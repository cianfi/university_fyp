FROM influxdb:2.7-alpine

ENV DOCKER_INFLUXDB_INIT_MODE=setup \
    DOCKER_INFLUXDB_INIT_USERNAME="admin" \
    DOCKER_INFLUXDB_INIT_PASSWORD="admin1234" \
    DOCKER_INFLUXDB_INIT_ORG="my-org" \
    DOCKER_INFLUXDB_INIT_BUCKET="network-data" \
    DOCKER_INFLUXDB_INIT_RETENTION="5d" \
    DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=${INFLUXDB_TOKEN}

COPY ./configuration/influxdb.conf /etc/influxdb/

EXPOSE 8086