FROM influxdb:2.7-alpine

ARG DOCKER_INFLUXDB_INIT_MODE \
    DOCKER_INFLUXDB_INIT_USERNAME \
    DOCKER_INFLUXDB_INIT_PASSWORD \
    DOCKER_INFLUXDB_INIT_ORG \
    DOCKER_INFLUXDB_INIT_BUCKET \
    DOCKER_INFLUXDB_INIT_RETENTION \
    DOCKER_INFLUXDB_INIT_ADMIN_TOKEN

ENV DOCKER_INFLUXDB_INIT_MODE=${DOCKER_INFLUXDB_INIT_MODE} \
    DOCKER_INFLUXDB_INIT_USERNAME=${DOCKER_INFLUXDB_INIT_USERNAME} \
    DOCKER_INFLUXDB_INIT_PASSWORD=${DOCKER_INFLUXDB_INIT_PASSWORD} \
    DOCKER_INFLUXDB_INIT_ORG=${DOCKER_INFLUXDB_INIT_ORG}\
    DOCKER_INFLUXDB_INIT_BUCKET=${DOCKER_INFLUXDB_INIT_BUCKET} \
    DOCKER_INFLUXDB_INIT_RETENTION=${DOCKER_INFLUXDB_INIT_RETENTION} \
    DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=${DOCKER_INFLUXDB_INIT_ADMIN_TOKEN}

WORKDIR /

COPY /configuration/influxdb.conf /etc/influxdb/influxdb.conf

EXPOSE 8086